# Fichero: ./platformio.ini
# Descripción: Diagnóstico: Error de compilación FF_MAX_LFN undeclared. Causa Raíz: La configuración del sistema de ficheros FAT (FATFS) en el sdkconfig base deshabilita el soporte para nombres de fichero largos (LFN), lo cual es requerido por los assets de animación. Solución Holística: Se añaden las banderas de compilación -UCONFIG_FATFS_LFN_NONE, -DCONFIG_FATFS_LFN_HEAP, y -DCONFIG_FATFS_MAX_LFN=255 a AMBOS entornos ('ws1_9ts' y 'ws1_47ts'). Esto anula la configuración restrictiva por defecto, habilita LFN vía heap, y define la longitud máxima, resolviendo el error de compilación y asegurando la funcionalidad de la SD en ambas placas.
# Último cambio: 21/08/2025 - 17:35

#
# PlatformIO Project Configuration File
#
# NOTA DE MIGRACIÓN:
# Este fichero está configurado para usar la estructura de directorios de ESP-IDF.
# El código fuente principal está en la carpeta 'main', y los componentes adicionales
# en la carpeta 'components'.

[platformio]
# --- SELECCIÓN DE PLACA ---
# Cambia este valor para elegir el hardware a compilar.
# Opciones: ws1_9ts, ws1_47ts
default_envs = ws1_47ts
src_dir = main

# =================================================================
# === ENTORNO PARA WAVESHARE 1.9" =================================
# =================================================================
[env:ws1_9ts]
# -- Configuración General --
platform = espressif32
board = esp32-c6-devkitc-1
framework = espidf

# -- Opciones de Compilación y Subida --
board_build.flash_mode = dio
board_build.flash_freq = 80m
board_build.partitions = partitions.csv
board_build.sdkconfig_path = sdkconfig.ws1_9ts

# -- Opciones del Monitor Serie --
monitor_speed = 115200

# -- Banderas de Compilación --
build_flags = 
    -DCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6=y
    -UCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6_147
    -UCONFIG_FATFS_LFN_NONE
    -DCONFIG_FATFS_LFN_HEAP
    -DCONFIG_FATFS_MAX_LFN=255

# =================================================================
# === ENTORNO PARA WAVESHARE 1.47" ================================
# =================================================================
[env:ws1_47ts]
# -- Configuración General --
platform = espressif32
board = esp32-c6-devkitc-1
framework = espidf

# -- Opciones de Compilación y Subida --
board_build.flash_mode = dio
board_build.flash_freq = 80m
board_build.partitions = partitions.csv
board_build.sdkconfig_path = sdkconfig.ws1_47ts
board_build.flash_size = 2MB

# -- Opciones del Monitor Serie --
monitor_speed = 115200

# -- Banderas de Compilación --
build_flags = 
    -DCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6_147=y
    -UCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6
    -UCONFIG_FATFS_LFN_NONE
    -DCONFIG_FATFS_LFN_HEAP
    -DCONFIG_FATFS_MAX_LFN=255
