# Fichero: ./platformio.ini
# Descripción: Diagnóstico: El build falla por dos motivos: una advertencia crítica sobre el tamaño de flash y un error de compilación posterior. Solución: 1) Se establece 'board_build.flash_size = 2MB' para el entorno 'ws1_47ts' para coincidir con el hardware real. 2) Se elimina la bandera de compilación '-DCONFIG_ESP_LCD_TOUCH_CST816S_DISABLE_READ_ID=y', que es irrelevante para el controlador táctil AXS5106 de esta placa y puede enmascarar la verdadera causa de los fallos de I2C. Este fichero prepara el entorno para la corrección del driver de display.
# Último cambio: 20/08/2025 - 08:28

#
# PlatformIO Project Configuration File
#
# NOTA DE MIGRACIÓN:
# Este fichero está configurado para usar la estructura de directorios de ESP-IDF.
# El código fuente principal está en la carpeta 'main', y los componentes adicionales
# en la carpeta 'components'.

[platformio]
# --- SELECCIÓN DE PLACA ---
# Cambia este valor para elegir el hardware a compilar.
# Opciones: ws1_9ts, ws1_47ts
default_envs = ws1_47ts
src_dir = main

# =================================================================
# === ENTORNO PARA WAVESHARE 1.9" =================================
# =================================================================
[env:ws1_9ts]
# -- Configuración General --
platform = espressif32
board = esp32-c6-devkitc-1
framework = espidf

# -- Opciones de Compilación y Subida --
board_build.flash_mode = dio
board_build.flash_freq = 80m
board_build.partitions = partitions.csv
board_build.sdkconfig_path = sdkconfig.ws1_9ts

# -- Opciones del Monitor Serie --
monitor_speed = 115200

# -- Banderas de Compilación --
build_flags = 
    -DCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6=y
    -UCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6_147
    -DCONFIG_ESP_LCD_TOUCH_CST816S_DISABLE_READ_ID=y

# =================================================================
# === ENTORNO PARA WAVESHARE 1.47" ================================
# =================================================================
[env:ws1_47ts]
# -- Configuración General --
platform = espressif32
board = esp32-c6-devkitc-1
framework = espidf

# -- Opciones de Compilación y Subida --
board_build.flash_mode = dio
board_build.flash_freq = 80m
board_build.partitions = partitions.csv
board_build.sdkconfig_path = sdkconfig.ws1_47ts
board_build.flash_size = 2MB

# -- Opciones del Monitor Serie --
monitor_speed = 115200

# -- Banderas de Compilación --
build_flags = 
    -DCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6_147=y
    -UCONFIG_DIYTOGETHER_BOARD_WAVESHARE_C6
